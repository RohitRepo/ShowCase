{% extends "base.html" %}
{% block html_attr_block %}ng-app="CompositionApp"{% endblock %}
	
{% block title_block %}
	<title>{{composition.title | title}} by {{composition.artist.name | title}} | Interpretations and Stories</title>
{%endblock%}

{% block meta_block %}
	<meta charset="UTF-8">
	<meta name="Description" content="Title: {{composition.title}}, Artist: {{composition.artist.name}}, Category: Painting Interpretations and Stories">
	<link rel="canonical" href="http://thirddime.com/arts/{{composition.slug}}" />
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta property="og:title" content="{{composition.title}}">
	<meta property="og:site_name" content="ThirdDime">
	<meta property="og:url" content="http://thirddime.com/arts/{{composition.slug}}">
	<meta property="og:description" content="{{top_interpretation}}">
	<meta property="og:image" content="http://thirddime.com/{{composition.matter.url}}">
	<meta property="og:type" content="website">
	<meta property="og:type" content="[462422103909005]">
{%endblock%}

{% block css_block %}
	 <!-- build:css /static/build/composition.css -->
	<link rel="stylesheet" type="text/css" href="/static/vendor/zoome/zoome-min.css">
	<link rel="stylesheet" type="text/css" href="/static/bower_components/animate.css/animate.css">
	<link rel="stylesheet" type="text/css" href="/static/css/base.css">
    <link rel="stylesheet" type="text/css" href="/static/css/post/post.css">
	<link rel="stylesheet" type="text/css" href="/static/css/composition/main.css">
	<!-- endbuild -->
{%endblock%}

{% block body_attr_block %}ng-controller="compositionController" ng-init="init({{composition.id}}, '{{composition.matter.url}}')"{% endblock %}

{% block content_block %}
	<section class="painting-area">
		<div class="painting-container">
			<ul class="palette" ng-show="isColorPaletteActive" ng-cloak>
				<li style="background: rgb([[ dominantColor['0'] ]], [[ dominantColor['1'] ]], [[ dominantColor['2'] ]])"></li>
				<br><br>
				<li style="background: rgb([[ color['0'] ]], [[ color['1'] ]], [[ color['2'] ]])" ng-repeat="color in palette"></li>
			</ul>
			<img class="painting painting-original" src="{{composition.matter.url}}" ng-show="isGrayScaleActive=='inactive' && isOutlineActive=='inactive'" ng-cloak alt="{{composition.slug}}">
			<img class="painting painting-grayscale" src="{{composition.get_grayscale_url}}" ng-if="isGrayScaleActive=='active'" ng-cloak alt="{{composition.slug}} grayscale">
			<img class="painting painting-outline" src="{{composition.get_outline_url}}" ng-if="isOutlineActive=='active'" ng-cloak alt="{{composition.slug}} outline">
		</div>


		<section tools-drawer class="art-tools">
			<button class="drawer-control">
			  <i class="material-icons">face</i>
			</button>
			<button>
			  <i class="material-icons">add</i>
			</button>
			<button>
			  <i class="material-icons">add</i>
			</button>
			<button>
			  <i class="material-icons">add</i>
			</button>
		</section>
	</section>


	<header class="meta-header">
		<div class="meta-header-container">
			<section class="meta-header-about">
	            <h1>{{composition.title | title}}</h1>
	            <h5 class="left">{{composition.views}} Views</h5>
			</section><!--
			--><section class="meta-header-posts">
	    		<ul class="header-posts-container clearfix">
	    			<li class="active">
		    			<h5>POSTS</h5><br>
		    			<h6 class="count">[[posts.length]]</h6>
	    			</li>
	    			<li>
		    			<h5>COLLECTIONS</h5><br>
		    			<h6 class="count">34</h6>
	    			</li>
	    			<li>
		    			<h5>FOLLOWERS</h5><br>
		    			<h6 class="count">34</h6>
	    			</li>
	    		</ul>
	    		<section class="header-posts-actions">
	    			<img class="posts-actions" src="/static/css/composition/icons/upvote.svg">
	    		</section>
			</section><!--
			--><section class="meta-header-actions">
				{% if is_collected %}
				<button ng-cloak ng-show="collectedNow" ng-click="addToCollection()">ADD TO COLLECTION</button>
				<button class="collection-active" ng-cloak ng-hide="collectedNow" ng-click="removeFromCollection()">IN COLLECTION</button>
				{% else %}
				<button ng-cloak ng-hide="removedNow" ng-click="addToCollection()">ADD TO COLLECTION</button>
				<button class="collection-active" ng-cloak ng-show="removedNow" ng-click="removeFromCollection()">IN COLLECTION</button>
				{% endif %}
			</section>
		</div>
	</header>

	<section class="meta-content">
		<div class="meta-content-container">
			<section class="content-about">
	            <div class="by-header">Created By</div>
                <a class="by-user" href="/@{{composition.artist.slug}}">
                	<img src="{{composition.artist.get_picture_url}}">
                    <h3>{{composition.artist.name | title}}</h3>
                </a>

	            <div class="by-header">Uploaded By</div>
                <a class="by-user" ng-href="/@{{composition.uploader.slug}}" class="uploader">
                	<img src="{{composition.uploader.get_picture_url}}">
                    <h3>{{composition.uploader.name | title}}</h3>
                </a>
                <section class="content-about-actions">
                	<button class="about-action">FOLLOW THIS WORK</button>
                </section>
			</section><!--
			--><section class="content-posts clearfix" infinite-scroll="getNextPosts()" infinite-scroll-distance='1' infinite-scroll-disabled='disableNextPost'>
						<div ng-repeat="post in posts" post-template post-data="post"></div>
			</section><!--
			--><section class="content-actions">
			</section>
		</div>
	</section>

	<section class="end-marker clearfix nt-mb">
		<hr><img src="/static/images/header-md.png"><hr>
	</section>

	<footer class="primary-footer" analytics-scroll analytics-data="['Composition', 'View-Next-Post']" analytics-offset="300">
		<section analytics-click analytics-data="['Composition', 'Next Post']" class="next-post" ng-repeat="post in nextPosts">
			<a href="/arts/[[ post.composition.slug ]]#?[[post.search_parameter]]" target="_blank" >
				<div class="painting-holder" ng-style="{'background-image': 'url([[post.composition.matter_350]])'}"></div>
				<section class="post-details">
					<h4>[[post.composition.title | titlecase]]</h4>
					<p>[[post.interpretation.interpretation]]</p>
				</section>
				<footer class="next-footer">
					<h5>Read More...</h5>
				</footer>
			</a>
		</section>
	</footer>
{% endblock %}

{% block script_block %}
	<!-- build:js /static/build/composition.js -->
	<script type="text/javascript" src="/static/bower_components/nginfinitescroll/build/ng-infinite-scroll.min.js"></script>

	<script type="text/javascript" src="/static/vendor/fullscreen/jquery.fullscreen.js"></script>
	<script type="text/javascript" src="/static/bower_components/color-thief/dist/color-thief.min.js"></script>
	<script type="text/javascript" src="/static/bower_components/jquery.panzoom/dist/jquery.panzoom.min.js"></script>
	<script type="text/javascript" src="/static/vendor/zoome/zoome.min.js"></script>

	<script type="text/javascript" src="/static/bower_components/imagesloaded/imagesloaded.pkgd.min.js"></script>

	<script type="text/javascript" src="/static/js/composition/composition.module.js"></script>
	<script type="text/javascript" src="/static/js/composition/composition.controller.js"></script>
	<script type="text/javascript" src="/static/js/composition/sticky.directive.js"></script>
    <script type="text/javascript" src="/static/js/post/post.module.js"></script>
    <script type="text/javascript" src="/static/js/post/postApp.controller.js"></script>
    <script type="text/javascript" src="/static/js/post/post.controller.js"></script>
    <script type="text/javascript" src="/static/js/post/interpretationSetHeight.directive.js"></script>

    <script type="text/javascript" src="/static/js/composition/tools/tools.module.js"></script>
    <script type="text/javascript" src="/static/js/composition/tools/colors.directive.js"></script>
    <script type="text/javascript" src="/static/js/composition/tools/viewFinder.directive.js"></script>
    <script type="text/javascript" src="/static/js/composition/tools/fullscreen.directive.js"></script>
    <script type="text/javascript" src="/static/js/composition/tools/panZoom.directive.js"></script>
    <!-- endbuild -->
{% endblock %}