{% extends "base.html" %}
{% block html_attr_block %}ng-app="UserSettingsApp"{% endblock %}

{% block title_block %}
    <title>Settings | ThirdDime</title>
{%endblock%}

{% block meta_block %}
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
{%endblock%}

{% block css_block %}
     <!-- build:css /static/build/user-settings.css -->
    <link rel="stylesheet" type="text/css" href="/static/bower_components/animate.css/animate.css">
    <link rel="stylesheet" type="text/css" href="/static/css/base.css">
    <link rel="stylesheet" type="text/css" href="/static/css/user/settings.css">
    <!-- endbuild -->
{%endblock%}

{% block body_attr_block %}ng-controller="userSettingsController"{% endblock %}

{% block content_block %}
    <header class="primary-header" ng-init="init('{{user.id}}', '{{user.email}}', '{{user.name}}', '{{user.about}}', '{{user.picture.url}}')">
        <h1>Settings</h1>
        <hr>
    </header>

    <ul class="settings">
        <li>
            <form name="nameForm" ng-class="{active: nameForm.$dirty}">
                <section class="data">
                    <input type="text" placeholder="Name" ng-model="user.name" name="uname" maxlength="80" required>
                    <div ng-cloak ng-show="nameForm.$submitted || nameForm.uname.$dirty">
                        <span ng-show="nameForm.uname.$error.required">Please provide a name.</span>
                   </div>
               </section>
               <div class="actions" ng-cloak ng-show="nameForm.$dirty">
                   <button ng-disabled="nameForm.$invalid" ng-click="updateName(user.name, nameForm)">UPDATE</button>
               </div>
           </form>
        </li>
        <li>
            <form name="aboutForm">
                <section class="data">
                    <input type="text" placeholder="About you" ng-model="user.about" name="uabout" maxlength="40">
               </section>
               <div class="actions" ng-cloak ng-show="aboutForm.$dirty">
                   <button ng-disabled="aboutForm.$invalid" ng-click="updateAbout(user.about, aboutForm)">UPDATE</button>
               </div>
           </form>
        </li>
        <li>
            <section class="picture">
                <input type="file" class="file" upload-picture  />
                <div class="cover">
                    <!-- <h4>Select image of the piece</h4> -->
                    <img ng-src="[[user.picture]]">
                </div>
            </section>
        </li>
    </ul>
{% endblock %}

{% block script_block %}
    <!-- build:js /static/build/userSettings.js -->
    <script type="text/javascript" src="/static/bower_components/ng-facebook/ngFacebook.js"></script>

    <script type="text/javascript" src="/static/bower_components/nginfinitescroll/build/ng-infinite-scroll.min.js"></script>
    <script type="text/javascript" src="/static/bower_components/angular-upload/angular-upload.min.js"></script>
    <script type="text/javascript" src="/static/js/user/settings.module.js"></script>
    <script type="text/javascript" src="/static/js/user/userSettings.controller.js"></script>
    <script type="text/javascript" src="/static/js/models/model.module.js"></script>
    <script type="text/javascript" src="/static/js/models/user.model.js"></script>
    <script type="text/javascript" src="/static/js/authentication/auth.module.js"></script>
    <script type="text/javascript" src="/static/js/authentication/auth.service.js"></script>
    <script type="text/javascript" src="/static/js/authentication/facebook.service.js"></script>
    <script type="text/javascript" src="/static/js/components/topbar/topbar.directive.js"></script>
    <script type="text/javascript" src="/static/js/components/topbar/topbar.controller.js"></script>
    <script type="text/javascript" src="/static/js/components/scrollTo.directive.js"></script>
    <script type="text/javascript" src="/static/js/components/fadeOnScroll.directive.js"></script>
    <script type="text/javascript" src="/static/js/components/titlecase.filter.js"></script>
    <script type="text/javascript" src="/static/js/components/util/util.module.js"></script>
    <script type="text/javascript" src="/static/js/components/util/progress.service.js"></script>
    <script type="text/javascript" src="/static/js/components/util/progress.directive.js"></script>
    <script type="text/javascript" src="/static/js/components/util/alert.service.js"></script>
    <script type="text/javascript" src="/static/js/components/util/alert.directive.js"></script>
    <!-- endbuild -->
{% endblock %}